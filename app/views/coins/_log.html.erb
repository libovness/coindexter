<li class="log-block block">
	<div class="row">
		<% if show_tag %>
			<div class="col-md-4">
				<% if defined?(log.coins) && !log.coins.nil? %>
		    		<div class="user-log-classification">
						<div class="user-log-classification-network">
							<%= image_tag(log.coins.logo.small.url, size: "20x20") if log.coins.logo? %>
							<% if log.coins.network.nil? %>
								<%= link_to truncate(log.coins.name, length: 16	), log.coin %>
							<% else %>
								<%= link_to truncate(log.coins.name, length: 16	), network_coin_path(log.coins.network, log.coins) %>
							<% end %>
						</div>
					</div>
				<% end %>
			</div>
			<div class="col-md-8 log-inner-block">
		<% else %>
			<div class="col-md-8 col-md-offset-4 log-inner-block">
		<% end %>
			<ul class="log-list"> 
				<% log.changes.each do |change| %>
					<li>
						<% case change[:change_attr] %>
							<% when "Repositories", "Exchanges" %>
								<p>
									<%= change[:change_attr].capitalize %>
									<% if change[:change_type] == "added" %>
										added: 
											<% puts "log is #{change[:change].second}" %>
											<%= link_to change[:change].second.first["name"], change[:change].second.first["url"] %>
									<% elsif change[:change_type] == "edited" %>
										changed from 
											<% change[:change].first.each_with_index do |change, i| %>
												<%= link_to change["name"], change["url"] %>
											<% end %>
										to 
											<% change[:change].second.each_with_index do |change, i| %>
												<%= link_to change["name"], change["url"] %>
											<% end %>
									<% end %>
								</p>
							<% when "Network", "Description" %>
								<p>
									<%= change[:change_attr].capitalize %>
									<% if change[:change_type] == "added" %>
										added:
										<%= link_to change[:change].second.name, change[:change].second unless change[:change].nil? %>
									<% elsif change[:change_type] == "edited" %>
										changed from 
											<% change[:change].first.each_with_index do |change, i| %>
												<%= link_to change["name"], change unless change.nil? %><%= "," unless i + 1 == change[:change].second.length %>
											<% end %>
										to 
											<% change[:change].second.each_with_index do |change, i| %>
												<%= link_to change["name"], change unless change.nil? %>
											<% end %>
									<% end %>
								</p>
							<% when "Created" %>
								<p>
									Created 
									<%= link_to log.coins.name, log.coins %>
								</p>
							<% when "logo" %>
								<p>
									New logo
								</p>
							<% else %>
								<p>
									<%= change[:change_attr].capitalize %>
									<% if change[:change_type] == "added" %>
										added: "<%= change[:change].second.capitalize %>"
									<% elsif change[:change_type] == "edited" %>
										changed from "<%= change[:change].first %>" to "<%= change[:change].second.capitalize %>"
									<% end %>
								</p>
						<% end %>
					</li>
				<% end %>
			</ul>
			<%= render partial: '/shared/who_posted', locals: {user: log.user, created_at: log.created_at} %>
		</div>
	</div>
</li>